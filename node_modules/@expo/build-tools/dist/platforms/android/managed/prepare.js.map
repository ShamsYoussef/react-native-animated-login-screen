{"version":3,"file":"prepare.js","sourceRoot":"","sources":["../../../../src/platforms/android/managed/prepare.ts"],"names":[],"mappings":";;;;;AAAA,gDAAwB;AAExB,wDAA0B;AAE1B,kDAAyD;AAKzD,KAAK,UAAU,UAAU,CACvB,MAAuC,EACvC,UAAkB,EAClB,UAAkB;IAElB,MAAM,iBAAiB,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;IAC9E,MAAM,kBAAkB,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;IAC1E,MAAM,QAAQ,GAAG;QACf,GAAG,MAAM,CAAC,QAAQ;QAClB,kBAAkB;KACnB,CAAC;IACF,MAAM,WAAW,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,EAAE,MAAM,CAAC,CAAC;IAErF,OAAO;QACL,QAAQ,EAAE,oBAAQ,CAAC,OAAO;QAC1B,UAAU;QACV,IAAI,EAAE,qBAAS,CAAC,OAAO;QACvB,OAAO,EAAE,EAAE,QAAQ,EAAE;QACrB,WAAW;QACX,QAAQ,EAAE,MAAM;KACjB,CAAC;AACJ,CAAC;AAED,kBAAe,UAAU,CAAC","sourcesContent":["import path from 'path';\n\nimport fs from 'fs-extra';\n\nimport { Platform, BuildType } from '../../../constants';\nimport { types } from '../../../buildConfig';\n\nimport { ManagedAndroidJob } from './job';\n\nasync function prepareJob(\n  config: types.ManagedAndroidBuildConfig,\n  projectUrl: string,\n  projectDir: string,\n): Promise<ManagedAndroidJob> {\n  const keystoreLocalPath = path.join(projectDir, config.keystore.keystorePath);\n  const keystoreDataBase64 = await fs.readFile(keystoreLocalPath, 'base64');\n  const keystore = {\n    ...config.keystore,\n    keystoreDataBase64,\n  };\n  const packageJson = await fs.readFile(path.join(projectDir, 'package.json'), 'utf8');\n\n  return {\n    platform: Platform.Android,\n    projectUrl,\n    type: BuildType.Managed,\n    secrets: { keystore },\n    packageJson,\n    manifest: 'TODO',\n  };\n}\n\nexport default prepareJob;\n"]}