{"version":3,"file":"prepare.js","sourceRoot":"","sources":["../../../../src/platforms/ios/managed/prepare.ts"],"names":[],"mappings":";;;;;AAAA,gDAAwB;AAExB,wDAA0B;AAE1B,kDAAyD;AAKzD,KAAK,UAAU,UAAU,CACvB,MAAmC,EACnC,UAAkB,EAClB,UAAkB;IAElB,MAAM,uBAAuB,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,uBAAuB,CAAC,CAAC;IACtF,MAAM,uBAAuB,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC;IACrF,MAAM,2BAA2B,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;IAC/F,MAAM,2BAA2B,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,2BAA2B,EAAE,QAAQ,CAAC,CAAC;IAC7F,MAAM,OAAO,GAAG;QACd,yBAAyB,EAAE,uBAAuB;QAClD,uBAAuB,EAAE;YACvB,UAAU,EAAE,2BAA2B;YACvC,QAAQ,EAAE,MAAM,CAAC,uBAAuB,CAAC,QAAQ;SAClD;KACF,CAAC;IACF,MAAM,WAAW,GAAG,MAAM,kBAAE,CAAC,QAAQ,CAAC,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,EAAE,MAAM,CAAC,CAAC;IAErF,OAAO;QACL,QAAQ,EAAE,oBAAQ,CAAC,GAAG;QACtB,UAAU;QACV,IAAI,EAAE,qBAAS,CAAC,OAAO;QACvB,OAAO;QACP,WAAW;QACX,QAAQ,EAAE,MAAM;KACjB,CAAC;AACJ,CAAC;AAED,kBAAe,UAAU,CAAC","sourcesContent":["import path from 'path';\n\nimport fs from 'fs-extra';\n\nimport { Platform, BuildType } from '../../../constants';\nimport { types } from '../../../buildConfig';\n\nimport { ManagediOSJob } from './job';\n\nasync function prepareJob(\n  config: types.ManagediOSBuildConfig,\n  projectUrl: string,\n  projectDir: string,\n): Promise<ManagediOSJob> {\n  const provisioningProfilePath = path.join(projectDir, config.provisioningProfilePath);\n  const provisioningProfileData = await fs.readFile(provisioningProfilePath, 'base64');\n  const distributionCertificatePath = path.join(projectDir, config.distributionCertificate.path);\n  const distributionCertificateData = await fs.readFile(distributionCertificatePath, 'base64');\n  const secrets = {\n    provisioningProfileBase64: provisioningProfileData,\n    distributionCertificate: {\n      dataBase64: distributionCertificateData,\n      password: config.distributionCertificate.password,\n    },\n  };\n  const packageJson = await fs.readFile(path.join(projectDir, 'package.json'), 'utf8');\n\n  return {\n    platform: Platform.iOS,\n    projectUrl,\n    type: BuildType.Managed,\n    secrets,\n    packageJson,\n    manifest: 'TODO',\n  };\n}\n\nexport default prepareJob;\n"]}