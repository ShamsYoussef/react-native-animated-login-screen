{"version":3,"sources":["detach/IosWorkspace.js"],"names":["async","_getVersionedExpoKitConfigAsync","sdkVersion","skipServerValidation","versions","await","Versions","versionsAsync","let","sdkVersionConfig","sdkVersions","Error","iosVersion","iosExpoViewUrl","iosClientVersion","_getOrCreateTemplateDirectoryAsync","context","type","path","join","data","expoSourcePath","expoRootTemplateDirectory","process","env","EXPO_VIEW_DIR","projectPath","isDirectory","fs","mkdirpSync","logger","info","invariant","Api","downloadAsync","extract","_renameAndMoveProjectFilesAsync","projectDirectory","projectName","gitIgnorePath","existsSync","rimraf","sync","e","filesToTransform","bundleIdentifier","exp","ios","Promise","all","map","fileName","transformFileContentsAsync","fileString","replace","filesToMove","forEach","destFileName","dirname","extname","spawnAsyncThrowError","_configureVersionsPlistAsync","configFilePath","standaloneSdkVersion","IosPlist","modifyAsync","versionConfig","detachedNativeVersions","shell","kernel","_configureBuildConstantsPlistAsync","constantsConfig","STANDALONE_CONTEXT_TYPE","_renderPodfileFromTemplateAsync","iosProjectDirectory","getPaths","podfileTemplateFilename","podfileSubstitutions","TARGET_NAME","reactNativeDependencyPath","modulesPath","detachableUniversalModules","Modules","getDetachableModules","shellAppSdkVersion","EXPOKIT_TAG","EXPOKIT_PATH","relative","VERSIONED_REACT_NATIVE_PATH","REACT_NATIVE_PATH","UNIVERSAL_MODULES_PATH","UNIVERSAL_MODULES","module","libName","subdirectory","EXPOKIT_TAG_IOS","templatePodfilePath","renderPodfileAsync","createDetachedAsync","supportingDirectory","projectRootDirectory","isServiceContext","getNewestSdkVersionSupportedAsync","Utils","ncpAsync","projectPackageJsonPath","exists","copy","_installRequiredPackagesAsync","rimrafDontThrow","cleanBackupAsync","_getPackagesToInstallWhenEjecting","packagesToInstallWhenEjecting","projectRoot","packagesToInstall","Object","keys","packageName","push","length","installPackagesAsync","addDetachedConfigToExp","warn","publishBundlePath","publishManifestPath","intermediatesDirectory","build","isExpoClientBuild","isAnonymous","config","name","projectNameLabel","toLowerCase","workspaceSourcePath","archivePath","allVersions","newestVersion","highestMajorComponent","version","majorComponent","parseSdkMajorVersion"],"mappings":"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","file":"../../detach/IosWorkspace.js","sourcesContent":["import fs from 'fs-extra';\nimport invariant from 'invariant';\nimport path from 'path';\nimport rimraf from 'rimraf';\n\nimport Api from '../Api';\nimport {\n  isDirectory,\n  parseSdkMajorVersion,\n  rimrafDontThrow,\n  spawnAsyncThrowError,\n  transformFileContentsAsync,\n} from './ExponentTools';\nimport { renderPodfileAsync } from './IosPodsTools.js';\nimport * as IosPlist from './IosPlist';\nimport logger from './Logger';\nimport * as Utils from '../Utils';\nimport * as Versions from '../Versions';\nimport * as Modules from '../modules/Modules';\nimport installPackagesAsync from './installPackagesAsync';\n\nexport { setBundleIdentifier } from './IosSetBundleIdentifier';\n\nasync function _getVersionedExpoKitConfigAsync(sdkVersion, skipServerValidation) {\n  const versions = await Versions.versionsAsync();\n  let sdkVersionConfig = versions.sdkVersions[sdkVersion];\n  if (!sdkVersionConfig) {\n    if (skipServerValidation) {\n      sdkVersionConfig = {};\n    } else {\n      throw new Error(`Unsupported SDK version: ${sdkVersion}`);\n    }\n  }\n  const { iosVersion, iosExpoViewUrl } = sdkVersionConfig;\n  const iosClientVersion = iosVersion ? iosVersion : versions.iosVersion;\n  return {\n    iosClientVersion,\n    iosExpoViewUrl,\n  };\n}\n\nasync function _getOrCreateTemplateDirectoryAsync(context, iosExpoViewUrl) {\n  if (context.type === 'service') {\n    return path.join(context.data.expoSourcePath, '..');\n  } else if (context.type === 'user') {\n    let expoRootTemplateDirectory;\n    if (process.env.EXPO_VIEW_DIR) {\n      // Only for testing\n      expoRootTemplateDirectory = process.env.EXPO_VIEW_DIR;\n    } else {\n      // HEY: if you need other paths into the extracted archive, be sure and include them\n      // when the archive is generated in `ios/pipeline.js`\n      expoRootTemplateDirectory = path.join(context.data.projectPath, 'temp-ios-directory');\n      if (!isDirectory(expoRootTemplateDirectory)) {\n        fs.mkdirpSync(expoRootTemplateDirectory);\n        logger.info('Downloading iOS code...');\n        invariant(iosExpoViewUrl, `The URL for ExpoKit iOS must be set`);\n        await Api.downloadAsync(iosExpoViewUrl, expoRootTemplateDirectory, {\n          extract: true,\n        });\n      }\n    }\n    return expoRootTemplateDirectory;\n  }\n}\n\nasync function _renameAndMoveProjectFilesAsync(context, projectDirectory, projectName) {\n  // remove .gitignore, as this actually pertains to internal expo template management\n  try {\n    const gitIgnorePath = path.join(projectDirectory, '.gitignore');\n    if (fs.existsSync(gitIgnorePath)) {\n      rimraf.sync(gitIgnorePath);\n    }\n  } catch (e) {}\n\n  const filesToTransform = [\n    path.join('exponent-view-template.xcodeproj', 'project.pbxproj'),\n    path.join('exponent-view-template.xcworkspace', 'contents.xcworkspacedata'),\n    path.join(\n      'exponent-view-template.xcodeproj',\n      'xcshareddata',\n      'xcschemes',\n      'exponent-view-template.xcscheme'\n    ),\n  ];\n\n  let bundleIdentifier;\n  if (context.type === 'user') {\n    const exp = context.data.exp;\n    bundleIdentifier = exp.ios && exp.ios.bundleIdentifier ? exp.ios.bundleIdentifier : null;\n    if (!bundleIdentifier) {\n      throw new Error(`Cannot configure an ExpoKit workspace with no iOS bundle identifier.`);\n    }\n  } else if (context.type === 'service') {\n    bundleIdentifier = 'host.exp.Exponent';\n  }\n\n  await Promise.all(\n    filesToTransform.map(fileName =>\n      transformFileContentsAsync(path.join(projectDirectory, fileName), fileString => {\n        return fileString\n          .replace(/com.getexponent.exponent-view-template/g, bundleIdentifier)\n          .replace(/exponent-view-template/g, projectName);\n      })\n    )\n  );\n\n  // order of this array matters\n  const filesToMove = [\n    'exponent-view-template',\n    path.join(\n      'exponent-view-template.xcodeproj',\n      'xcshareddata',\n      'xcschemes',\n      'exponent-view-template.xcscheme'\n    ),\n    'exponent-view-template.xcodeproj',\n    'exponent-view-template.xcworkspace',\n  ];\n\n  filesToMove.forEach(async fileName => {\n    let destFileName = path.join(path.dirname(fileName), `${projectName}${path.extname(fileName)}`);\n    await spawnAsyncThrowError('/bin/mv', [\n      path.join(projectDirectory, fileName),\n      path.join(projectDirectory, destFileName),\n    ]);\n  });\n}\n\nasync function _configureVersionsPlistAsync(configFilePath, standaloneSdkVersion) {\n  await IosPlist.modifyAsync(configFilePath, 'EXSDKVersions', versionConfig => {\n    versionConfig.sdkVersions = [standaloneSdkVersion];\n    versionConfig.detachedNativeVersions = {\n      shell: standaloneSdkVersion,\n      kernel: standaloneSdkVersion,\n    };\n    return versionConfig;\n  });\n}\n\nasync function _configureBuildConstantsPlistAsync(configFilePath, context) {\n  await IosPlist.modifyAsync(configFilePath, 'EXBuildConstants', constantsConfig => {\n    constantsConfig.STANDALONE_CONTEXT_TYPE = context.type;\n    return constantsConfig;\n  });\n}\n\nasync function _renderPodfileFromTemplateAsync(\n  context,\n  expoRootTemplateDirectory,\n  sdkVersion,\n  iosClientVersion\n) {\n  const { iosProjectDirectory, projectName } = getPaths(context);\n  let podfileTemplateFilename;\n  let podfileSubstitutions = {\n    TARGET_NAME: projectName,\n  };\n  let reactNativeDependencyPath;\n  let modulesPath;\n\n  const detachableUniversalModules = Modules.getDetachableModules(\n    'ios',\n    context.data.shellAppSdkVersion || sdkVersion\n  );\n  if (context.type === 'user') {\n    invariant(iosClientVersion, `The iOS client version must be specified`);\n    reactNativeDependencyPath = path.join(context.data.projectPath, 'node_modules', 'react-native');\n    modulesPath = path.join(context.data.projectPath, 'node_modules');\n\n    podfileSubstitutions.EXPOKIT_TAG = `ios/${iosClientVersion}`;\n    podfileTemplateFilename = 'ExpoKit-Podfile';\n  } else if (context.type === 'service') {\n    reactNativeDependencyPath = path.join(\n      expoRootTemplateDirectory,\n      'react-native-lab',\n      'react-native'\n    );\n    modulesPath = path.join(expoRootTemplateDirectory, 'packages');\n\n    podfileSubstitutions.EXPOKIT_PATH = path.relative(\n      iosProjectDirectory,\n      expoRootTemplateDirectory\n    );\n    podfileSubstitutions.VERSIONED_REACT_NATIVE_PATH = path.relative(\n      iosProjectDirectory,\n      path.join(expoRootTemplateDirectory, 'ios', 'versioned-react-native')\n    );\n    podfileTemplateFilename = 'ExpoKit-Podfile-versioned';\n  } else {\n    throw new Error(`Unsupported context type: ${context.type}`);\n  }\n  podfileSubstitutions.REACT_NATIVE_PATH = path.relative(\n    iosProjectDirectory,\n    reactNativeDependencyPath\n  );\n  podfileSubstitutions.UNIVERSAL_MODULES_PATH = path.relative(iosProjectDirectory, modulesPath);\n  podfileSubstitutions.UNIVERSAL_MODULES = detachableUniversalModules.map(module => ({\n    ...module,\n    path: path.join(\n      podfileSubstitutions.UNIVERSAL_MODULES_PATH,\n      module.libName,\n      module.subdirectory\n    ),\n  }));\n\n  // env flags for testing\n  if (process.env.EXPOKIT_TAG_IOS) {\n    logger.info(`EXPOKIT_TAG_IOS: Using custom ExpoKit iOS tag...`);\n    podfileSubstitutions.EXPOKIT_TAG = process.env.EXPOKIT_TAG_IOS;\n  } else if (process.env.EXPO_VIEW_DIR) {\n    logger.info('EXPO_VIEW_DIR: Using local ExpoKit source for iOS...');\n    podfileSubstitutions.EXPOKIT_PATH = path.relative(\n      iosProjectDirectory,\n      process.env.EXPO_VIEW_DIR\n    );\n    // If EXPO_VIEW_DIR is defined overwrite UNIVERSAL_MODULES with paths pointing to EXPO_VIEW_DIR\n    podfileSubstitutions.UNIVERSAL_MODULES = podfileSubstitutions.UNIVERSAL_MODULES.map(module => ({\n      ...module,\n      path: path.relative(\n        iosProjectDirectory,\n        path.join(process.env.EXPO_VIEW_DIR, 'packages', module.libName, module.subdirectory)\n      ),\n    }));\n  }\n  const templatePodfilePath = path.join(\n    expoRootTemplateDirectory,\n    'template-files',\n    'ios',\n    podfileTemplateFilename\n  );\n  await renderPodfileAsync(\n    templatePodfilePath,\n    path.join(iosProjectDirectory, 'Podfile'),\n    podfileSubstitutions,\n    context.data.shellAppSdkVersion,\n    sdkVersion\n  );\n}\n\nasync function createDetachedAsync(context) {\n  const { iosProjectDirectory, projectName, supportingDirectory, projectRootDirectory } = getPaths(\n    context\n  );\n  logger.info(`Creating ExpoKit workspace at ${iosProjectDirectory}...`);\n\n  const isServiceContext = context.type === 'service';\n  const standaloneSdkVersion = await getNewestSdkVersionSupportedAsync(context);\n\n  let iosClientVersion;\n  let iosExpoViewUrl;\n  if (context.type === 'user') {\n    ({ iosClientVersion, iosExpoViewUrl } = await _getVersionedExpoKitConfigAsync(\n      standaloneSdkVersion,\n      process.env.EXPO_VIEW_DIR\n    ));\n  }\n\n  const expoRootTemplateDirectory = await _getOrCreateTemplateDirectoryAsync(\n    context,\n    iosExpoViewUrl\n  );\n\n  // copy template workspace\n  logger.info('Moving iOS project files...');\n  logger.info('Attempting to create project directory...');\n  fs.mkdirpSync(iosProjectDirectory);\n  logger.info('Created project directory! Copying files:');\n  await Utils.ncpAsync(\n    path.join(expoRootTemplateDirectory, 'exponent-view-template', 'ios'),\n    iosProjectDirectory\n  );\n\n  const projectPackageJsonPath = path.join(projectRootDirectory, 'package.json');\n\n  if (!(await fs.exists(projectPackageJsonPath))) {\n    logger.info('Copying blank package.json...');\n    await fs.copy(\n      path.join(expoRootTemplateDirectory, 'exponent-view-template', 'package.json'),\n      projectPackageJsonPath\n    );\n  }\n\n  logger.info('Installing required packages...');\n  await _installRequiredPackagesAsync(projectRootDirectory, standaloneSdkVersion);\n\n  logger.info('Naming iOS project...');\n  await _renameAndMoveProjectFilesAsync(context, iosProjectDirectory, projectName);\n\n  logger.info('Configuring iOS dependencies...');\n  // this configuration must happen prior to build time because it affects which\n  // native versions of RN we depend on.\n  await _configureVersionsPlistAsync(supportingDirectory, standaloneSdkVersion);\n  await _configureBuildConstantsPlistAsync(supportingDirectory, context);\n  await _renderPodfileFromTemplateAsync(\n    context,\n    expoRootTemplateDirectory,\n    standaloneSdkVersion,\n    iosClientVersion\n  );\n\n  if (!process.env.EXPO_VIEW_DIR) {\n    if (context.type === 'user') {\n      rimrafDontThrow(expoRootTemplateDirectory);\n    }\n    await IosPlist.cleanBackupAsync(supportingDirectory, 'EXSDKVersions', false);\n  }\n}\n\nasync function _getPackagesToInstallWhenEjecting(sdkVersion) {\n  const versions = await Versions.versionsAsync();\n  return versions.sdkVersions[sdkVersion]\n    ? versions.sdkVersions[sdkVersion].packagesToInstallWhenEjecting\n    : null;\n}\n\n// @tsapeta: Temporarily copied from Detach._detachAsync. This needs to be invoked also when creating a shell app workspace\n// and not only when ejecting. These copies can be moved to one place if we decide to have just one flow for these two processes.\nasync function _installRequiredPackagesAsync(projectRoot, sdkVersion) {\n  const packagesToInstallWhenEjecting = await _getPackagesToInstallWhenEjecting(sdkVersion);\n  const packagesToInstall = [];\n\n  if (packagesToInstallWhenEjecting && typeof packagesToInstallWhenEjecting === 'object') {\n    Object.keys(packagesToInstallWhenEjecting).forEach(packageName => {\n      packagesToInstall.push(`${packageName}@${packagesToInstallWhenEjecting[packageName]}`);\n    });\n  }\n  if (packagesToInstall.length) {\n    await installPackagesAsync(projectRoot, packagesToInstall);\n  }\n}\n\nfunction addDetachedConfigToExp(exp, context) {\n  if (context.type !== 'user') {\n    logger.warn(`Tried to modify exp for a non-user StandaloneContext, ignoring`);\n    return exp;\n  }\n  const { supportingDirectory } = getPaths(context);\n  exp.ios.publishBundlePath = path.relative(\n    context.data.projectPath,\n    path.join(supportingDirectory, 'shell-app.bundle')\n  );\n  exp.ios.publishManifestPath = path.relative(\n    context.data.projectPath,\n    path.join(supportingDirectory, 'shell-app-manifest.json')\n  );\n  return exp;\n}\n\n/**\n *  paths returned:\n *    iosProjectDirectory - root directory of an (uncompiled) xcworkspace and obj-c source tree\n *    projectName - xcworkspace project name normalized from context.config\n *    supportingDirectory - location of Info.plist, xib files, etc. during configuration.\n *      for an unbuilt app this is underneath iosProjectDirectory. for a compiled app it's just\n *      a path to the flat xcarchive.\n *    intermediatesDirectory - temporary spot to write whatever files are needed during the\n *      detach/build process but can be discarded afterward.\n */\nfunction getPaths(context) {\n  let iosProjectDirectory;\n  let projectName;\n  let supportingDirectory;\n  let intermediatesDirectory;\n  let projectRootDirectory;\n\n  if (context.build.isExpoClientBuild()) {\n    projectName = 'Exponent';\n  } else if (context.isAnonymous()) {\n    projectName = 'ExpoKitApp';\n  } else if (context.config && context.config.name) {\n    let projectNameLabel = context.config.name;\n    projectName = projectNameLabel.replace(/[^a-z0-9_-]/gi, '-').toLowerCase();\n  } else {\n    throw new Error('Cannot configure an Expo project with no name.');\n  }\n  if (context.type === 'user') {\n    projectRootDirectory = context.data.projectPath;\n    iosProjectDirectory = path.join(context.data.projectPath, 'ios');\n    supportingDirectory = path.join(iosProjectDirectory, projectName, 'Supporting');\n  } else if (context.type === 'service') {\n    projectRootDirectory = path.dirname(context.build.ios.workspaceSourcePath);\n    iosProjectDirectory = context.build.ios.workspaceSourcePath;\n    if (context.data.archivePath) {\n      // compiled archive has a flat NSBundle\n      supportingDirectory = context.data.archivePath;\n    } else {\n      supportingDirectory = path.join(iosProjectDirectory, projectName, 'Supporting');\n    }\n  } else {\n    throw new Error(`Unsupported StandaloneContext type: ${context.type}`);\n  }\n  // sandbox intermediates directory by workspace so that concurrently operating\n  // contexts do not interfere with one another.\n  intermediatesDirectory = path.join(\n    iosProjectDirectory,\n    context.build.isExpoClientBuild() ? 'ExponentIntermediates' : 'ExpoKitIntermediates'\n  );\n  return {\n    projectRootDirectory,\n    intermediatesDirectory,\n    iosProjectDirectory,\n    projectName,\n    supportingDirectory,\n  };\n}\n\n/**\n *  Get the newest sdk version supported given the standalone context.\n *  Not all contexts support the newest sdk version.\n */\nasync function getNewestSdkVersionSupportedAsync(context) {\n  if (context.type === 'user') {\n    return context.data.exp.sdkVersion;\n  } else if (context.type === 'service') {\n    // when running in universe or on a turtle machine,\n    // we care about what sdk version is actually present in this working copy.\n    // this might not be the same thing deployed to our www Versions endpoint.\n    let { supportingDirectory } = getPaths(context);\n    if (!fs.existsSync(supportingDirectory)) {\n      // if we run this method before creating the workspace, we may need to look at the template.\n      supportingDirectory = path.join(\n        context.data.expoSourcePath,\n        '..',\n        'exponent-view-template',\n        'ios',\n        'exponent-view-template',\n        'Supporting'\n      );\n    }\n    let allVersions, newestVersion;\n    await IosPlist.modifyAsync(supportingDirectory, 'EXSDKVersions', versionConfig => {\n      allVersions = versionConfig.sdkVersions;\n      return versionConfig;\n    });\n    let highestMajorComponent = 0;\n    allVersions.forEach(version => {\n      let majorComponent = parseSdkMajorVersion(version);\n      if (majorComponent > highestMajorComponent) {\n        highestMajorComponent = majorComponent;\n        newestVersion = version;\n      }\n    });\n    return newestVersion;\n  }\n}\n\nexport { addDetachedConfigToExp, createDetachedAsync, getPaths, getNewestSdkVersionSupportedAsync };\n"],"sourceRoot":"/@expo/xdl@57.9.17/src"}