{"version":3,"sources":["detach/ExponentTools.ts"],"names":["_getFilesizeInBytes","path","stats","fs","statSync","fileSizeInBytes","parseSdkMajorVersion","expSdkVersion","Infinity","sdkMajorVersion","versionComponents","split","map","number","parseInt","_","saveUrlToPathAsync","url","timeout","response","axios","get","responseType","Promise","resolve","reject","stream","createWriteStream","on","data","pipe","saveImageToPathAsync","projectRoot","pathOrURL","outPath","localPath","existsSync","copy","getManifestAsync","headers","options","buildPhaseLogger","logger","LoggerDetach","withFields","buildPhase","_retryPromise","replace","err","error","Error","info","JSON","stringify","fn","retries","spawnAsyncThrowError","command","args","stdio","cwd","process","pipeToLogger","promise","child","streams","stdout","stderr","loggerFields","spawnAsync","e","message","createSpawner","lastArg","length","optionsFromArg","pop","transformFileContentsAsync","filename","transform","fileString","readFile","newFileString","writeFile","manifestUsesSplashApi","manifest","platform","splash","ios","android","rimrafDontThrow","directory","removeSync","removeIfExists","file","remove","isDirectory","dir","getResolvedLocalesAsync","exp","locales","undefined","lang","Object","entries","s","parse","XDLError","regexFileAsync","regex","toString","deleteLinesInFileAsync","startRegex","endRegex","lines","filteredLines","inDeleteRange","i","match","push","join"],"mappings":"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","sourcesContent":["import { ExpoConfig, Platform } from '@expo/config';\nimport spawnAsyncQuiet, { SpawnOptions, SpawnResult } from '@expo/spawn-async';\nimport fs from 'fs-extra';\nimport isObject from 'lodash/isObject';\nimport path from 'path';\nimport axios from 'axios';\nimport { Readable } from 'stream';\n\nimport XDLError from '../XDLError';\nimport LoggerDetach, { Logger, pipeOutputToLogger } from './Logger';\n\nfunction _getFilesizeInBytes(path: string) {\n  let stats = fs.statSync(path);\n  let fileSizeInBytes = stats['size'];\n  return fileSizeInBytes;\n}\n\nfunction parseSdkMajorVersion(expSdkVersion: string) {\n  // We assume that the unversioned SDK is the latest\n  if (expSdkVersion === 'UNVERSIONED') {\n    return Infinity;\n  }\n\n  let sdkMajorVersion = 0;\n  try {\n    let versionComponents = expSdkVersion.split('.').map(number => parseInt(number, 10));\n    sdkMajorVersion = versionComponents[0];\n  } catch (_) {}\n  return sdkMajorVersion;\n}\n\nasync function saveUrlToPathAsync(url: string, path: string, timeout = 20000) {\n  const response = await axios.get(url, { responseType: 'stream', timeout });\n\n  return new Promise(function (resolve, reject) {\n    let stream = fs.createWriteStream(path);\n    stream.on('close', resolve);\n    stream.on('error', reject);\n    response.data.on('error', reject).pipe(stream);\n  });\n}\n\nasync function saveImageToPathAsync(projectRoot: string, pathOrURL: string, outPath: string) {\n  const localPath = path.resolve(projectRoot, pathOrURL);\n\n  if (fs.existsSync(localPath)) {\n    await fs.copy(localPath, outPath);\n  } else {\n    await saveUrlToPathAsync(pathOrURL, outPath, 0);\n  }\n}\n\nasync function getManifestAsync(url: string, headers: any, options: any = {}) {\n  const buildPhaseLogger =\n    options.logger || LoggerDetach.withFields({ buildPhase: 'reading manifest' });\n\n  let response;\n  try {\n    response = await _retryPromise(() => axios.get(url.replace('exp://', 'http://'), { headers }));\n  } catch (err) {\n    buildPhaseLogger.error(err);\n    throw new Error('Failed to fetch manifest from www');\n  }\n\n  buildPhaseLogger.info('Using manifest:', JSON.stringify(response.data, null, 2));\n  return response.data;\n}\n\nasync function _retryPromise<T>(fn: (...args: any[]) => T, retries = 5): Promise<T> {\n  try {\n    return await fn();\n  } catch (err) {\n    if (retries-- > 0) {\n      return await _retryPromise(fn, retries);\n    } else {\n      throw err;\n    }\n  }\n}\n\nexport type AsyncSpawnOptions = SpawnOptions & {\n  loggerFields?: any;\n  pipeToLogger?: boolean | { stdout?: boolean; stderr?: boolean };\n  stdoutOnly?: boolean;\n};\n\nasync function spawnAsyncThrowError(\n  command: string,\n  args: string[],\n  options: AsyncSpawnOptions = {\n    stdio: 'inherit',\n    cwd: process.cwd(),\n  }\n): Promise<SpawnResult> {\n  const { pipeToLogger } = options;\n  if (pipeToLogger) {\n    options.stdio = 'pipe';\n    options.cwd = options.cwd || process.cwd();\n  }\n  const promise = spawnAsyncQuiet(command, args, options);\n  if (pipeToLogger && promise.child) {\n    let streams: { stdout?: Readable | null; stderr?: Readable | null } = {};\n    if (pipeToLogger === true || pipeToLogger.stdout) {\n      streams.stdout = promise.child.stdout;\n    }\n    if (pipeToLogger === true || pipeToLogger.stderr) {\n      streams.stderr = promise.child.stderr;\n    }\n    pipeOutputToLogger(streams, options.loggerFields, options);\n  }\n  return promise;\n}\n\nasync function spawnAsync(\n  command: string,\n  args: string[],\n  options: SpawnOptions\n): Promise<SpawnResult | void> {\n  try {\n    return await spawnAsyncThrowError(command, args, options);\n  } catch (e) {\n    LoggerDetach.error(e.message);\n  }\n}\n\nfunction createSpawner(buildPhase: string, logger?: Logger) {\n  return (command: string, ...args: any[]) => {\n    const lastArg = args[args.length - 1];\n    const optionsFromArg = isObject(lastArg) ? args.pop() : {};\n\n    const options = { ...optionsFromArg, pipeToLogger: true };\n    if (buildPhase) {\n      options.loggerFields = options.loggerFields ? options.loggerFields : {};\n      options.loggerFields = { ...options.loggerFields, buildPhase };\n    }\n\n    if (logger) {\n      logger.info('Executing command:', command, ...args);\n    }\n    return spawnAsyncThrowError(command, args, options);\n  };\n}\n\nasync function transformFileContentsAsync(\n  filename: string,\n  transform: (input: string) => string | null\n) {\n  let fileString = await fs.readFile(filename, 'utf8');\n  let newFileString = transform(fileString);\n  if (newFileString !== null) {\n    await fs.writeFile(filename, newFileString);\n  }\n}\n\nfunction manifestUsesSplashApi(manifest: ExpoConfig, platform: Platform) {\n  if (platform === 'ios') {\n    return manifest.splash || (manifest.ios && manifest.ios.splash);\n  }\n  if (platform === 'android') {\n    return manifest.splash || (manifest.android && manifest.android.splash);\n  }\n  return false;\n}\n\nfunction rimrafDontThrow(directory: string) {\n  fs.removeSync(directory);\n}\n\nasync function removeIfExists(file: string) {\n  await fs.remove(file);\n}\n\nfunction isDirectory(dir: string) {\n  try {\n    if (fs.statSync(dir).isDirectory()) {\n      return true;\n    }\n\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\n\ntype LocaleMap = { [lang: string]: any };\n\nasync function getResolvedLocalesAsync(exp: ExpoConfig): Promise<LocaleMap> {\n  const locales: LocaleMap = {};\n  if (exp.locales !== undefined) {\n    for (const [lang, path] of Object.entries(exp.locales)) {\n      const s = await fs.readFile(path as string, 'utf8');\n      try {\n        locales[lang] = JSON.parse(s);\n      } catch (e) {\n        throw new XDLError('INVALID_JSON', JSON.stringify(e));\n      }\n    }\n  }\n  return locales;\n}\n\nasync function regexFileAsync(\n  regex: RegExp | string,\n  replace: string,\n  filename: string\n): Promise<void> {\n  let file = await fs.readFile(filename);\n  let fileString = file.toString();\n  await fs.writeFile(filename, fileString.replace(regex, replace));\n}\n\n// Matches sed /d behavior\nasync function deleteLinesInFileAsync(\n  startRegex: RegExp | string,\n  endRegex: RegExp | string,\n  filename: string\n): Promise<void> {\n  let file = await fs.readFile(filename);\n  let fileString = file.toString();\n  let lines = fileString.split(/\\r?\\n/);\n  let filteredLines = [];\n  let inDeleteRange = false;\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].match(startRegex)) {\n      inDeleteRange = true;\n    }\n\n    if (!inDeleteRange) {\n      filteredLines.push(lines[i]);\n    }\n\n    if (inDeleteRange && lines[i].match(endRegex)) {\n      inDeleteRange = false;\n    }\n  }\n  await fs.writeFile(filename, filteredLines.join('\\n'));\n}\n\nexport {\n  isDirectory,\n  parseSdkMajorVersion,\n  saveUrlToPathAsync,\n  saveImageToPathAsync,\n  getManifestAsync,\n  rimrafDontThrow,\n  removeIfExists,\n  spawnAsyncThrowError,\n  spawnAsync,\n  transformFileContentsAsync,\n  manifestUsesSplashApi,\n  getResolvedLocalesAsync,\n  regexFileAsync,\n  deleteLinesInFileAsync,\n  createSpawner,\n};\n"],"file":"../../detach/ExponentTools.js","sourceRoot":"/@expo/xdl@57.9.17/src"}