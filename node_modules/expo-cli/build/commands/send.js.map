{"version":3,"sources":["../../src/commands/send.ts"],"names":["action","projectDir","options","urlOpts","optsAsync","url","UrlUtils","constructManifestUrlAsync","chalk","underline","handleMobileOptsAsync","recipient","sendTo","UserSettings","getAsync","askUser","askForSendToAsync","sendUrlAsync","log","gray","program","command","description","option","asyncActionProjectDir"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAIA,eAAeA,MAAf,CAAsBC,UAAtB,EAA0CC,OAA1C,EAA4D;AAC1D,QAAMC,mBAAQC,SAAR,CAAkBH,UAAlB,EAA8BC,OAA9B,CAAN;AAEA,QAAMG,GAAG,GAAG,MAAMC,gBAASC,yBAAT,CAAmCN,UAAnC,CAAlB;AAEA,sBAAI,qCAAqCO,iBAAMC,SAAN,CAAgBJ,GAAhB,CAArC,GAA4D,IAAhE;;AAEA,MAAI,MAAMF,mBAAQO,qBAAR,CAA8BT,UAA9B,EAA0CC,OAA1C,CAAV,EAA8D;AAC5D;AACD;;AAED,MAAIS,SAAJ;;AACA,MAAI,OAAOT,OAAO,CAACU,MAAf,KAA0B,SAA9B,EAAyC;AACvCD,IAAAA,SAAS,GAAGT,OAAO,CAACU,MAApB;AACD,GAFD,MAEO;AACLD,IAAAA,SAAS,GAAG,MAAME,oBAAaC,QAAb,CAAsB,QAAtB,EAAgC,IAAhC,CAAlB;AACD;;AAED,MAAI,CAACH,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAG,MAAMI,mBAAQC,iBAAR,EAAlB;AACD;;AAED,MAAIL,SAAJ,EAAe;AACb,UAAMC,kBAAOK,YAAP,CAAoBZ,GAApB,EAAyBM,SAAzB,CAAN;AACD,GAFD,MAEO;AACLO,mBAAIC,IAAJ,CAAS,gEAAT;AACD;AACF;;AAEc,kBAASC,OAAT,EAA2B;AACxCA,EAAAA,OAAO,CACJC,OADH,CACW,oBADX,EAEGC,WAFH,CAEgB,4CAFhB,EAGGC,MAHH,CAGU,uBAHV,EAGmC,kCAHnC,EAIGpB,OAJH,GAKGqB,qBALH,CAKyBxB,MALzB;AAMD","sourcesContent":["import chalk from 'chalk';\nimport { Command } from 'commander';\nimport { UrlUtils, UserSettings } from '@expo/xdl';\n\nimport askUser from '../askUser';\nimport log from '../log';\nimport sendTo from '../sendTo';\nimport urlOpts, { URLOptions } from '../urlOpts';\n\ntype Options = URLOptions & { sendTo?: string };\n\nasync function action(projectDir: string, options: Options) {\n  await urlOpts.optsAsync(projectDir, options);\n\n  const url = await UrlUtils.constructManifestUrlAsync(projectDir);\n\n  log('Your project manifest URL is\\n\\n' + chalk.underline(url) + '\\n');\n\n  if (await urlOpts.handleMobileOptsAsync(projectDir, options)) {\n    return;\n  }\n\n  let recipient;\n  if (typeof options.sendTo !== 'boolean') {\n    recipient = options.sendTo;\n  } else {\n    recipient = await UserSettings.getAsync('sendTo', null);\n  }\n\n  if (!recipient) {\n    recipient = await askUser.askForSendToAsync();\n  }\n\n  if (recipient) {\n    await sendTo.sendUrlAsync(url, recipient);\n  } else {\n    log.gray(\"(Not sending anything because you didn't specify a recipient.)\");\n  }\n}\n\nexport default function(program: Command) {\n  program\n    .command('send [project-dir]')\n    .description(`Send the project's url to an email address`)\n    .option('-s, --send-to  [dest]', 'Email address to send the URL to')\n    .urlOpts()\n    .asyncActionProjectDir(action);\n}\n"],"file":"send.js"}