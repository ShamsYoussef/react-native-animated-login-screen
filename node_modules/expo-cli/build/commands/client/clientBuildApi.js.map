{"version":3,"sources":["../../../src/commands/client/clientBuildApi.ts"],"names":["createClientBuildRequest","user","appleContext","distributionCert","provisioningProfile","pushKey","udids","addUdid","email","bundleIdentifier","customAppConfig","ApiV2","clientForUser","postAsync","appleTeamId","team","id","appleTeamName","name","credentials","apnsKeyP8","apnsKeyId","certP12","certPassword","provisioningProfileId","teamId","appleSession","fastlaneSession","udidsString","JSON","stringify","getExperienceName","experienceName","isAllowedToBuild"],"mappings":";;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAiBO,eAAeA,wBAAf,CAAwC;AAC7CC,EAAAA,IAAI,GAAG,IADsC;AAE7CC,EAAAA,YAF6C;AAG7CC,EAAAA,gBAH6C;AAI7CC,EAAAA,mBAJ6C;AAK7CC,EAAAA,OAL6C;AAM7CC,EAAAA,KAN6C;AAO7CC,EAAAA,OAP6C;AAQ7CC,EAAAA,KAR6C;AAS7CC,EAAAA,gBAT6C;AAU7CC,EAAAA,eAAe,GAAG;AAV2B,CAAxC,EAWuB;AAC5B,SAAO,MAAMC,aAAMC,aAAN,CAAoBX,IAApB,EAA0BY,SAA1B,CAAoC,iCAApC,EAAuE;AAClFC,IAAAA,WAAW,EAAEZ,YAAY,CAACa,IAAb,CAAkBC,EADmD;AAElFC,IAAAA,aAAa,EAAEf,YAAY,CAACa,IAAb,CAAkBG,IAFiD;AAGlFX,IAAAA,OAHkF;AAIlFE,IAAAA,gBAJkF;AAKlFD,IAAAA,KALkF;AAMlFE,IAAAA,eANkF;AAOlFS,IAAAA,WAAW,EAAE,EACX,IAAId,OAAO,IAAIA,OAAO,CAACe,SAAnB,GAA+B;AAAEA,QAAAA,SAAS,EAAEf,OAAO,CAACe;AAArB,OAA/B,GAAkE,IAAtE,CADW;AAEX,UAAIf,OAAO,IAAIA,OAAO,CAACgB,SAAnB,GAA+B;AAAEA,QAAAA,SAAS,EAAEhB,OAAO,CAACgB;AAArB,OAA/B,GAAkE,IAAtE,CAFW;AAGXC,MAAAA,OAAO,EAAEnB,gBAAgB,CAACmB,OAHf;AAIXC,MAAAA,YAAY,EAAEpB,gBAAgB,CAACoB,YAJpB;AAKXC,MAAAA,qBAAqB,EAAEpB,mBAAmB,CAACoB,qBALhC;AAMXpB,MAAAA,mBAAmB,EAAEA,mBAAmB,CAACA,mBAN9B;AAOXqB,MAAAA,MAAM,EAAEvB,YAAY,CAACa,IAAb,CAAkBC,EAPf;AAQXU,MAAAA,YAAY,EAAExB,YAAY,CAACyB,eARhB;AASXC,MAAAA,WAAW,EAAEC,IAAI,CAACC,SAAL,CAAexB,KAAf;AATF;AAPqE,GAAvE,CAAb;AAmBD;;AAEM,eAAeyB,iBAAf,CAAiC;AACtC9B,EAAAA,IAAI,GAAG,IAD+B;AAEtCa,EAAAA;AAFsC,CAAjC,EAGsE;AAC3E,QAAM;AAAEkB,IAAAA;AAAF,MAAqB,MAAMrB,aAAMC,aAAN,CAAoBX,IAApB,EAA0BY,SAA1B,CAC/B,8BAD+B,EAE/B;AACEC,IAAAA;AADF,GAF+B,CAAjC;AAMA,SAAOkB,cAAP;AACD;;AAEM,eAAeC,gBAAf,CAAgC;AACrChC,EAAAA,IAAI,GAAG,IAD8B;AAErCa,EAAAA;AAFqC,CAAhC,EAGqD;AAC1D,SAAO,MAAMH,aAAMC,aAAN,CAAoBX,IAApB,EAA0BY,SAA1B,CAAoC,+BAApC,EAAqE;AAChFC,IAAAA;AADgF,GAArE,CAAb;AAGD","sourcesContent":["import { ApiV2, User } from '@expo/xdl';\nimport { ExpoConfig } from '@expo/config';\n\nexport type ClientBuildRequestOptions = {\n  user: User | null;\n  appleTeamId?: string;\n  appleContext: any;\n  distributionCert: any;\n  provisioningProfile: any;\n  pushKey: any;\n  udids: string[];\n  addUdid: any;\n  email: any;\n  bundleIdentifier: string;\n  customAppConfig: ExpoConfig | {};\n};\n\nexport async function createClientBuildRequest({\n  user = null,\n  appleContext,\n  distributionCert,\n  provisioningProfile,\n  pushKey,\n  udids,\n  addUdid,\n  email,\n  bundleIdentifier,\n  customAppConfig = {},\n}: ClientBuildRequestOptions) {\n  return await ApiV2.clientForUser(user).postAsync('client-build/create-ios-request', {\n    appleTeamId: appleContext.team.id,\n    appleTeamName: appleContext.team.name,\n    addUdid,\n    bundleIdentifier,\n    email,\n    customAppConfig,\n    credentials: {\n      ...(pushKey && pushKey.apnsKeyP8 ? { apnsKeyP8: pushKey.apnsKeyP8 } : null),\n      ...(pushKey && pushKey.apnsKeyId ? { apnsKeyId: pushKey.apnsKeyId } : null),\n      certP12: distributionCert.certP12,\n      certPassword: distributionCert.certPassword,\n      provisioningProfileId: provisioningProfile.provisioningProfileId,\n      provisioningProfile: provisioningProfile.provisioningProfile,\n      teamId: appleContext.team.id,\n      appleSession: appleContext.fastlaneSession,\n      udidsString: JSON.stringify(udids),\n    },\n  });\n}\n\nexport async function getExperienceName({\n  user = null,\n  appleTeamId,\n}: Pick<ClientBuildRequestOptions, 'user' | 'appleTeamId'>): Promise<string> {\n  const { experienceName } = await ApiV2.clientForUser(user).postAsync(\n    'client-build/experience-name',\n    {\n      appleTeamId,\n    }\n  );\n  return experienceName;\n}\n\nexport async function isAllowedToBuild({\n  user = null,\n  appleTeamId,\n}: Pick<ClientBuildRequestOptions, 'user' | 'appleTeamId'>) {\n  return await ApiV2.clientForUser(user).postAsync('client-build/allowed-to-build', {\n    appleTeamId,\n  });\n}\n"],"file":"clientBuildApi.js"}