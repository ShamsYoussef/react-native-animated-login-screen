{"version":3,"sources":["../../../../../src/commands/upload/submission-service/utils/errors.ts"],"names":["SubmissionErrorCode","SubmissionErrorMessages","ANDROID_UNKNOWN_ERROR","ANDROID_FIRST_UPLOAD_ERROR","log","terminalLink","ANDROID_OLD_VERSION_CODE_ERROR","ANDROID_MISSING_PRIVACY_POLICY","printSubmissionError","error","Object","values","includes","errorCode","addNewLineIfNone","message"],"mappings":";;;;;;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;IAEKA,mB;;WAAAA,mB;AAAAA,EAAAA,mB;AAAAA,EAAAA,mB;AAAAA,EAAAA,mB;AAAAA,EAAAA,mB;GAAAA,mB,KAAAA,mB;;AAOL,MAAMC,uBAA4D,GAAG;AACnE,GAACD,mBAAmB,CAACE,qBAArB,GACE,wEAFiE;AAGnE,GAACF,mBAAmB,CAACG,0BAArB,GACE,+HACC,GAAEC,eAAIC,YAAJ,CAAiB,iBAAjB,EAAoC,2CAApC,CAAiF,GALnB;AAMnE,GAACL,mBAAmB,CAACM,8BAArB,GACE,wDACA,2FADA,GAEA,sIAFA,GAGC,GAAEF,eAAIC,YAAJ,CAAiB,iBAAjB,EAAoC,+CAApC,CAAqF,GAVvB;AAWnE,GAACL,mBAAmB,CAACO,8BAArB,GACE,6EACC,GAAEH,eAAIC,YAAJ,CAAiB,iBAAjB,EAAoC,yCAApC,CAA+E;AAbjB,CAArE;;AAgBA,SAASG,oBAAT,CAA8BC,KAA9B,EAA+D;AAC7D,MAAKC,MAAM,CAACC,MAAP,CAAcX,mBAAd,CAAD,CAAiDY,QAAjD,CAA0DH,KAAK,CAACI,SAAhE,CAAJ,EAAgF;AAC9E,UAAMA,SAAS,GAAGJ,KAAK,CAACI,SAAxB;;AACAT,mBAAIU,gBAAJ;;AACAV,mBAAIK,KAAJ,CAAUR,uBAAuB,CAACY,SAAD,CAAjC;;AACA,WAAOA,SAAS,KAAKb,mBAAmB,CAACE,qBAAzC;AACD,GALD,MAKO;AACL,wBAAIO,KAAK,CAACM,OAAV;AACA,WAAO,IAAP;AACD;AACF","sourcesContent":["import { SubmissionError } from '../SubmissionService.types';\nimport log from '../../../../log';\n\nenum SubmissionErrorCode {\n  ANDROID_UNKNOWN_ERROR = 'SUBMISSION_SERVICE_ANDROID_UNKNOWN_ERROR',\n  ANDROID_FIRST_UPLOAD_ERROR = 'SUBMISSION_SERVICE_ANDROID_FIRST_UPLOAD_ERROR',\n  ANDROID_OLD_VERSION_CODE_ERROR = 'SUBMISSION_SERVICE_ANDROID_OLD_VERSION_CODE_ERROR',\n  ANDROID_MISSING_PRIVACY_POLICY = 'SUBMISSION_SERVICE_ANDROID_MISSING_PRIVACY_POLICY',\n}\n\nconst SubmissionErrorMessages: Record<SubmissionErrorCode, string> = {\n  [SubmissionErrorCode.ANDROID_UNKNOWN_ERROR]:\n    \"We couldn't figure out what went wrong. Please see logs to learn more.\",\n  [SubmissionErrorCode.ANDROID_FIRST_UPLOAD_ERROR]:\n    \"You haven't submitted this app to Google Play Store yet. The first submission of the app needs to be performed manually.\\n\" +\n    `${log.terminalLink('Learn more here', 'https://expo.fyi/first-android-submission')}.`,\n  [SubmissionErrorCode.ANDROID_OLD_VERSION_CODE_ERROR]:\n    \"You've already submitted this version of the app.\\n\" +\n    'Versions are identified by Android version code (expo.android.versionCode in app.json).\\n' +\n    \"If you're submitting a managed Expo project, increment the version code in app.json and build the project with expo build:android.\\n\" +\n    `${log.terminalLink('Learn more here', 'https://expo.fyi/bumping-android-version-code')}.`,\n  [SubmissionErrorCode.ANDROID_MISSING_PRIVACY_POLICY]:\n    'The app has permissions that require a privacy policy set for the app.\\n' +\n    `${log.terminalLink('Learn more here', 'https://expo.fyi/missing-privacy-policy')}.`,\n};\n\nfunction printSubmissionError(error: SubmissionError): boolean {\n  if ((Object.values(SubmissionErrorCode) as string[]).includes(error.errorCode)) {\n    const errorCode = error.errorCode as SubmissionErrorCode;\n    log.addNewLineIfNone();\n    log.error(SubmissionErrorMessages[errorCode]);\n    return errorCode === SubmissionErrorCode.ANDROID_UNKNOWN_ERROR;\n  } else {\n    log(error.message);\n    return true;\n  }\n}\n\nexport { printSubmissionError };\n"],"file":"errors.js"}