{"version":3,"sources":["../../src/appleApi/setup.ts"],"names":["ENABLE_WSL","setupCompleted","setup","process","platform","version","match","Error","fs","access","WSL_BASH_PATH","constants","F_OK","e"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA,MAAMA,UAAU,GAAI;;;;;;;CAApB;AASA,IAAIC,cAAc,GAAG,KAArB;;AAEO,eAAeC,KAAf,GAAuB;AAC5B,MAAID,cAAJ,EAAoB;AAClB;AACD;;AAED,MAAIE,OAAO,CAACC,QAAR,KAAqB,OAAzB,EAAkC;AAChC,UAAM,CAACC,OAAD,IAAY,qBAAUC,KAAV,CAAgB,KAAhB,KAA0B,CAAC,IAAD,CAA5C;;AACA,QAAID,OAAO,KAAK,IAAhB,EAAsB;AACpB,YAAM,IAAIE,KAAJ,CAAU,gEAAV,CAAN;AACD;;AAED,QAAI;AACF,YAAMC,mBAAGC,MAAH,CAAUC,yBAAV,EAAyBF,mBAAGG,SAAH,CAAaC,IAAtC,CAAN;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACV,YAAM,IAAIN,KAAJ,CAAUP,UAAV,CAAN;AACD;AACF;;AAEDC,EAAAA,cAAc,GAAG,IAAjB;AACD","sourcesContent":["import { release } from 'os';\nimport fs from 'fs-extra';\n\nimport { WSL_BASH_PATH } from './fastlane';\n\nconst ENABLE_WSL = `\nDoes not seem like WSL is enabled on this machine. Download from\nthe Windows app store a distribution of Linux, then in an admin powershell run:\n\nEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n\nand run the new Linux installation at least once\n`;\n\nlet setupCompleted = false;\n\nexport async function setup() {\n  if (setupCompleted) {\n    return;\n  }\n\n  if (process.platform === 'win32') {\n    const [version] = release().match(/\\d./) || [null];\n    if (version !== '10') {\n      throw new Error('Must be on at least Windows version 10 for WSL support to work');\n    }\n\n    try {\n      await fs.access(WSL_BASH_PATH, fs.constants.F_OK);\n    } catch (e) {\n      throw new Error(ENABLE_WSL);\n    }\n  }\n\n  setupCompleted = true;\n}\n"],"file":"setup.js"}